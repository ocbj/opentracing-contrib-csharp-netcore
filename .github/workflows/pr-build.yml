name: PR Checks
on:
    pull_request:

jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v4

            - name: Setup .NET 8
              uses: actions/setup-dotnet@v4
              with:
                  dotnet-version: 8.0.x

            - name: Setup .NET 9
              uses: actions/setup-dotnet@v4
              with:
                  dotnet-version: 9.0.x

            - name: Restore signing key
              run: |
                  echo "$SIGN_KEY" | base64 --decode > SignKey.snk
              env:
                  SIGN_KEY: ${{ secrets.SIGN_KEY }}

            - name: Restore
              run: dotnet restore

            - name: Build (Release)
              run: dotnet build --no-restore --configuration Release

            - name: Test (Release)
              run: dotnet test --no-build --configuration Release --verbosity normal
